/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.5.1/userguide/java_library_plugin.html
 */

buildscript {

    repositories {
		mavenCentral()
		maven {
		  url 'https://plugins.gradle.org/m2/'
		  url 'https://repo.spring.io/libs-snapshot'
        }
	}

	dependencies {
		classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
		classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.9.2'
		classpath "gradle.plugin.com.palantir.gradle.docker:gradle-docker:0.22.1"
	}
}

plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'
    id "com.palantir.docker" version "0.22.1"
}

description = 'qualibrate-java-api'

def javaVersion = JavaVersion.VERSION_1_8
sourceCompatibility = javaVersion
targetCompatibility = javaVersion

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

apply from: 'gradle/base.gradle'

ext {
        snippetsDir = file('build/generated-snippets')
		artifactId = "${rootProject.name}"
		springBootVersion = "${springBootVersion}"
        buildNumber = System.env.CI_BUILD_ID ?: '0'
        buildId = System.env.CI_BUILD_REF ? System.env.CI_BUILD_REF[0..7] : System.properties['user.name']
}

group = 'com.cs'
version = version + ".$buildNumber.$buildId"
sourceCompatibility = 1.8

repositories {
		mavenCentral()
		maven {
		  url 'https://plugins.gradle.org/m2/'
		  url 'https://repo.spring.io/libs-snapshot'
        }
}


dependencies {
  compile "org.springframework.boot:spring-boot-starter-web:$springBootVersion"
  compile "org.springframework.boot:spring-boot-starter-actuator:$springBootVersion"
  compile "org.springframework.boot:spring-boot-starter-security:$springBootVersion"
  compile "org.springframework:spring-context-support:$springVersion"
  compile 'org.springframework.retry:spring-retry:1.1.2.RELEASE'
  compile 'io.springfox:springfox-swagger2:2.4.0'
  compile 'io.springfox:springfox-swagger-ui:2.4.0'
  compileOnly 'org.projectlombok:lombok:1.16.4'
  annotationProcessor 'org.projectlombok:lombok:1.16.4'
  compile 'org.projectlombok:lombok:1.16.4'
  compile 'org.liquibase:liquibase-core:3.6.3'
  compile "org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion"
  compile "org.springframework.cloud:spring-cloud-aws-autoconfigure:$springCloudVersion"
  runtime 'mysql:mysql-connector-java:8.0.11'
  testCompile "org.springframework.boot:spring-boot-starter-test:$springBootVersion"
  testRuntime 'com.h2database:h2:1.4.190'
}


test {
    outputs.dir snippetsDir
    
    testLogging {
        events "passed", "skipped", "failed"
    }
}
